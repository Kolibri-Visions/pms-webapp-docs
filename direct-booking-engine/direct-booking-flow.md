# Direct Booking Engine - Complete UX Flow Documentation

**Version:** 1.0.0
**Last Updated:** 2025-12-21
**Status:** Approved

---

## Executive Summary

The Direct Booking Engine enables guests to search, book, and pay for vacation rental properties directly through the PMS-Webapp. This document details the complete multi-step booking flow, from property discovery to booking confirmation.

### Key Design Principles

1. **Frictionless Guest Experience**: Minimal steps, clear progress indicators
2. **Real-Time Availability**: Live calendar updates, instant pricing
3. **Guest Checkout Option**: No account required for booking
4. **Payment Security**: Stripe-handled card data, PCI DSS compliant
5. **Mobile-First**: Responsive design, touch-optimized interactions

---

## 1. Booking Flow Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DIRECT BOOKING FLOW (5 STEPS)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   STEP 1   â”‚   â”‚   STEP 2   â”‚   â”‚   STEP 3   â”‚   â”‚   STEP 4   â”‚          â”‚
â”‚  â”‚  Property  â”‚â”€â”€â–¶â”‚  Property  â”‚â”€â”€â–¶â”‚   Guest    â”‚â”€â”€â–¶â”‚  Payment   â”‚          â”‚
â”‚  â”‚   Search   â”‚   â”‚   Detail   â”‚   â”‚  Details   â”‚   â”‚            â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚        â”‚                â”‚                â”‚                â”‚                  â”‚
â”‚        â”‚                â”‚                â”‚                â”‚                  â”‚
â”‚  /properties     /properties/[id]  /booking/[id]/   /booking/[id]/         â”‚
â”‚                                     details          payment                â”‚
â”‚                                                                              â”‚
â”‚                                                          â”‚                   â”‚
â”‚                                                          â–¼                   â”‚
â”‚                                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚                                                   â”‚   STEP 5   â”‚            â”‚
â”‚                                                   â”‚Confirmationâ”‚            â”‚
â”‚                                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                         â”‚                    â”‚
â”‚                                              /booking/[id]/confirmation     â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Step 1: Property Search & Listing

### Page Route
```
/properties
/properties?location=berlin&check_in=2025-02-01&check_out=2025-02-05&guests=2
```

### User Journey
1. Guest arrives at property listing page
2. Uses search filters to find suitable properties
3. Views property cards with key information
4. Clicks on property card to view details

### UI Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo]          Properties           [Login] [List Your Property]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ SEARCH BAR                                                              â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚   Location     â”‚   Check-in    â”‚   Check-out   â”‚   Guests    â”‚ Search â”‚ â”‚
â”‚  â”‚ [Berlin, DE â–¼] â”‚ [Feb 1, 2025] â”‚ [Feb 5, 2025] â”‚   [2 â–¼]     â”‚   ğŸ”   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ FILTER BAR                                                              â”‚ â”‚
â”‚  â”‚ [Price â–¼] [Bedrooms â–¼] [Amenities â–¼] [Property Type â–¼] [Instant Book] â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  Showing 24 properties in Berlin                              [Map View ğŸ—ºï¸] â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚          â”‚
â”‚  â”‚ â”‚              â”‚ â”‚  â”‚ â”‚              â”‚ â”‚  â”‚ â”‚              â”‚ â”‚          â”‚
â”‚  â”‚ â”‚    [IMAGE]   â”‚ â”‚  â”‚ â”‚    [IMAGE]   â”‚ â”‚  â”‚ â”‚    [IMAGE]   â”‚ â”‚          â”‚
â”‚  â”‚ â”‚              â”‚ â”‚  â”‚ â”‚              â”‚ â”‚  â”‚ â”‚              â”‚ â”‚          â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚          â”‚
â”‚  â”‚ Modern Loft      â”‚  â”‚ Cozy Apartment   â”‚  â”‚ City Center Flat â”‚          â”‚
â”‚  â”‚ â˜… 4.9 (127)      â”‚  â”‚ â˜… 4.7 (89)       â”‚  â”‚ â˜… 4.8 (156)      â”‚          â”‚
â”‚  â”‚ 2 BR Â· 4 Guests  â”‚  â”‚ 1 BR Â· 2 Guests  â”‚  â”‚ 2 BR Â· 3 Guests  â”‚          â”‚
â”‚  â”‚ â‚¬120/night       â”‚  â”‚ â‚¬85/night        â”‚  â”‚ â‚¬150/night       â”‚          â”‚
â”‚  â”‚ â‚¬480 total       â”‚  â”‚ â‚¬340 total       â”‚  â”‚ â‚¬600 total       â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ ...              â”‚  â”‚ ...              â”‚  â”‚ ...              â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  [â—€ Previous]                 Page 1 of 4                    [Next â–¶]       â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Search Filters

| Filter | Type | Options |
|--------|------|---------|
| Location | Autocomplete | City/Region with coordinates |
| Check-in | Date Picker | Today + 365 days |
| Check-out | Date Picker | Check-in + 1 to max_stay |
| Guests | Dropdown | 1-16 guests |
| Price Range | Slider | â‚¬0 - â‚¬500+ per night |
| Bedrooms | Dropdown | 1, 2, 3, 4, 5+ |
| Amenities | Multi-select | WiFi, Pool, Parking, Kitchen, etc. |
| Property Type | Multi-select | Apartment, House, Villa, Studio |
| Instant Book | Toggle | Instant booking enabled |

### API Calls (Step 1)

```typescript
// GET /api/v1/properties/search
{
  location: { lat: 52.52, lng: 13.405, radius_km: 25 },
  check_in: "2025-02-01",
  check_out: "2025-02-05",
  guests: 2,
  filters: {
    price_min: 50,
    price_max: 200,
    bedrooms_min: 1,
    amenities: ["wifi", "kitchen"],
    property_types: ["apartment", "house"],
    instant_book: true
  },
  sort_by: "price_asc",  // or "rating_desc", "distance"
  page: 1,
  limit: 24
}

// Response
{
  properties: [
    {
      id: "uuid",
      name: "Modern Loft in Mitte",
      description_short: "Stylish loft with panoramic city views...",
      thumbnail_url: "https://...",
      images: ["url1", "url2"],
      rating: 4.9,
      review_count: 127,
      bedrooms: 2,
      bathrooms: 1,
      max_guests: 4,
      amenities: ["wifi", "kitchen", "washer"],
      property_type: "apartment",
      nightly_price: 120,
      total_price: 480,  // For selected dates
      currency: "EUR",
      instant_book: true,
      location: { city: "Berlin", district: "Mitte" }
    },
    // ... more properties
  ],
  pagination: {
    total: 96,
    page: 1,
    pages: 4,
    limit: 24
  },
  search_metadata: {
    location_name: "Berlin, Germany",
    dates: { check_in: "2025-02-01", check_out: "2025-02-05", nights: 4 },
    guests: 2
  }
}
```

---

## 3. Step 2: Property Detail & Availability

### Page Route
```
/properties/[property_id]
/properties/abc123?check_in=2025-02-01&check_out=2025-02-05&guests=2
```

### User Journey
1. Guest views property details, images, amenities
2. Interacts with availability calendar
3. Selects/confirms check-in and check-out dates
4. Sets number of guests
5. Reviews pricing breakdown
6. Clicks "Book Now" to proceed

### UI Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â—€ Back to Search]                                        [Share] [Save â™¡] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ â”‚                                          â”‚   â”‚  â”‚â”‚   IMAGE GALLERY    â”‚â”‚
â”‚  â”‚ â”‚                                          â”‚   â”‚  â”‚â”‚  â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”‚â”‚
â”‚  â”‚ â”‚              MAIN IMAGE                  â”‚   â”‚  â”‚â”‚  â”‚   â”‚ â”‚   â”‚ â”‚   â”‚ â”‚â”‚
â”‚  â”‚ â”‚                                          â”‚   â”‚  â”‚â”‚  â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â”‚â”‚
â”‚  â”‚ â”‚                                          â”‚   â”‚  â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”‚                                                 â”‚                         â”‚
â”‚  â”‚  Modern Loft in Berlin Mitte                    â”‚                         â”‚
â”‚  â”‚  â˜… 4.9 (127 reviews)  Â·  Berlin, Germany       â”‚                         â”‚
â”‚  â”‚  2 Bedrooms  Â·  1 Bathroom  Â·  Up to 4 Guests  â”‚                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ PROPERTY DESCRIPTION                  â”‚  â”‚ BOOKING WIDGET (STICKY)       â”‚â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                 â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚ Experience the heart of Berlin in    â”‚  â”‚ â”‚ â‚¬120 / night              â”‚ â”‚â”‚
â”‚  â”‚ this stylish loft apartment...       â”‚  â”‚ â”‚ â˜… 4.9 (127 reviews)       â”‚ â”‚â”‚
â”‚  â”‚                                       â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â”‚ [Show More]                           â”‚  â”‚                               â”‚â”‚
â”‚  â”‚                                       â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚ AMENITIES                             â”‚  â”‚ â”‚ CHECK-IN    â”‚ CHECK-OUT   â”‚ â”‚â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€                             â”‚  â”‚ â”‚ Feb 1, 2025 â”‚ Feb 5, 2025 â”‚ â”‚â”‚
â”‚  â”‚ âœ“ WiFi        âœ“ Kitchen              â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â”‚ âœ“ Washer      âœ“ Dryer                â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚ âœ“ Heating     âœ“ Air Conditioning     â”‚  â”‚ â”‚ GUESTS        [2 â–¼]      â”‚ â”‚â”‚
â”‚  â”‚ âœ“ TV          âœ“ Workspace            â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â”‚ [Show All 15 Amenities]               â”‚  â”‚                               â”‚â”‚
â”‚  â”‚                                       â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚ LOCATION                              â”‚  â”‚ â”‚ PRICE BREAKDOWN           â”‚ â”‚â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€                             â”‚  â”‚ â”‚ â‚¬120 x 4 nights = â‚¬480    â”‚ â”‚â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”‚ Cleaning fee      â‚¬50     â”‚ â”‚â”‚
â”‚  â”‚ â”‚                                  â”‚ â”‚  â”‚ â”‚ Service fee       â‚¬25     â”‚ â”‚â”‚
â”‚  â”‚ â”‚           [MAP]                  â”‚ â”‚  â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚ â”‚â”‚
â”‚  â”‚ â”‚                                  â”‚ â”‚  â”‚ â”‚ Total             â‚¬555    â”‚ â”‚â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â”‚ Berlin Mitte, near Alexanderplatz    â”‚  â”‚                               â”‚â”‚
â”‚  â”‚                                       â”‚  â”‚ [      Book Now       ]      â”‚â”‚
â”‚  â”‚ HOUSE RULES                           â”‚  â”‚                               â”‚â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                           â”‚  â”‚ You won't be charged yet     â”‚â”‚
â”‚  â”‚ â€¢ Check-in: 3:00 PM - 10:00 PM       â”‚  â”‚                               â”‚â”‚
â”‚  â”‚ â€¢ Check-out: 11:00 AM                â”‚  â”‚ [Contact Host]                â”‚â”‚
â”‚  â”‚ â€¢ No smoking                          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”‚ â€¢ No parties                          â”‚                                   â”‚
â”‚  â”‚                                       â”‚                                   â”‚
â”‚  â”‚ AVAILABILITY CALENDAR                 â”‚                                   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                 â”‚                                   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                                   â”‚
â”‚  â”‚ â”‚    [â—€ January 2025 â–¶]           â”‚  â”‚                                   â”‚
â”‚  â”‚ â”‚  Su Mo Tu We Th Fr Sa           â”‚  â”‚                                   â”‚
â”‚  â”‚ â”‚           1  2  3  4            â”‚  â”‚                                   â”‚
â”‚  â”‚ â”‚   5  6  7  8  9 10 11           â”‚  â”‚                                   â”‚
â”‚  â”‚ â”‚  12 13 14 15 16 17 18           â”‚  â”‚                                   â”‚
â”‚  â”‚ â”‚  19 20 21 22 23 24 25           â”‚  â”‚                                   â”‚
â”‚  â”‚ â”‚  26 27 28 29 30 31              â”‚  â”‚                                   â”‚
â”‚  â”‚ â”‚                                  â”‚  â”‚                                   â”‚
â”‚  â”‚ â”‚  [â–  Available] [â–  Selected]     â”‚  â”‚                                   â”‚
â”‚  â”‚ â”‚  [â–  Booked]    [â–  Blocked]      â”‚  â”‚                                   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                   â”‚
â”‚  â”‚                                       â”‚                                   â”‚
â”‚  â”‚ REVIEWS (127)                         â”‚                                   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                          â”‚                                   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                                   â”‚
â”‚  â”‚ â”‚ â˜…â˜…â˜…â˜…â˜…  John D. - Jan 2025       â”‚ â”‚                                   â”‚
â”‚  â”‚ â”‚ "Amazing place! The location..." â”‚ â”‚                                   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                                   â”‚
â”‚  â”‚ [Show All Reviews]                    â”‚                                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Availability Calendar Component

The calendar is the core component for date selection:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AVAILABILITY CALENDAR                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  [â—€]  February 2025     â”‚   â”‚       March 2025   [â–¶]  â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚ Su  Mo  Tu  We  Th  Fr  Sa â”‚   â”‚ Su  Mo  Tu  We  Th  Fr  Sa â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚                     1   â”‚   â”‚                     1   â”‚      â”‚
â”‚  â”‚ â‚¬120                    â”‚   â”‚ â‚¬110                    â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚  2   3   4   5   6   7  8  â”‚   â”‚  2   3   4   5   6   7  8  â”‚ â”‚
â”‚  â”‚â‚¬120 â‚¬120 â‚¬120 â‚¬120 [â– ] [â– ] â”‚   â”‚â‚¬110 â‚¬110 â‚¬110 â‚¬110 â‚¬110 [â– ] â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚  9  10  11  12  13  14 15  â”‚   â”‚  9  10  11  12  13  14 15  â”‚ â”‚
â”‚  â”‚[â– ] â‚¬120 â‚¬120 â‚¬120 â‚¬120 â‚¬140 â”‚   â”‚â‚¬110 â‚¬110 â‚¬110 â‚¬110 â‚¬110 â‚¬120 â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚ 16  17  18  19  20  21 22  â”‚   â”‚ 16  17  18  19  20  21 22  â”‚ â”‚
â”‚  â”‚â‚¬140 â‚¬120 â‚¬120 â‚¬120 â‚¬120 â‚¬140 â”‚   â”‚â‚¬120 â‚¬110 â‚¬110 â‚¬110 â‚¬110 â‚¬120 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                  â”‚
â”‚  Legend:                                                         â”‚
â”‚  [â– ] Booked/Blocked   [â‚¬120] Available + Price   [â˜…] Selected   â”‚
â”‚                                                                  â”‚
â”‚  Minimum stay: 2 nights                                          â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### API Calls (Step 2)

```typescript
// GET /api/v1/properties/{property_id}
// Response
{
  id: "uuid",
  name: "Modern Loft in Berlin Mitte",
  description: "Full description...",
  bedrooms: 2,
  bathrooms: 1,
  max_guests: 4,
  size_sqm: 65,
  property_type: "apartment",
  address: {
    city: "Berlin",
    district: "Mitte",
    country: "Germany",
    // Full address only shown after booking
  },
  amenities: ["wifi", "kitchen", "washer", "dryer", ...],
  house_rules: ["No smoking", "No parties", ...],
  check_in_time: "15:00",
  check_out_time: "11:00",
  images: [
    { url: "...", caption: "Living room", is_primary: true },
    // ...
  ],
  rating: 4.9,
  review_count: 127,
  instant_book: true,
  owner: {
    id: "uuid",
    first_name: "Maria",
    response_rate: 98,
    response_time: "within an hour"
  }
}

// POST /api/v1/bookings/check-availability
{
  property_id: "uuid",
  check_in: "2025-02-01",
  check_out: "2025-02-05"
}
// Response
{
  available: true,
  price_breakdown: {
    nightly_rates: [
      { date: "2025-02-01", price: 120 },
      { date: "2025-02-02", price: 120 },
      { date: "2025-02-03", price: 120 },
      { date: "2025-02-04", price: 120 }
    ],
    subtotal: 480,
    cleaning_fee: 50,
    service_fee: 25,
    taxes: 0,
    total: 555
  },
  minimum_stay: 2,
  maximum_stay: 30,
  instant_book: true,
  cancellation_policy: "moderate",
  currency: "EUR"
}

// GET /api/v1/properties/{property_id}/calendar?start=2025-02&end=2025-04
// Response
{
  calendar: [
    { date: "2025-02-01", available: true, price: 120, min_stay: 2 },
    { date: "2025-02-02", available: true, price: 120, min_stay: 2 },
    { date: "2025-02-06", available: false, status: "booked" },
    { date: "2025-02-07", available: false, status: "booked" },
    // ...
  ]
}
```

---

## 4. Step 3: Guest Details

### Page Route
```
/booking/[property_id]/details?check_in=2025-02-01&check_out=2025-02-05&guests=2
```

### User Journey
1. Guest enters personal information
2. Optionally adds special requests
3. Optionally checks "Create account" box
4. Reviews booking summary
5. Clicks "Continue to Payment"

### UI Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo]                                                          [Step 3/5] â”‚
â”‚                                                                              â”‚
â”‚  [â—€ Back]  Guest Details                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ YOUR INFORMATION                           â”‚  â”‚ BOOKING SUMMARY         â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                          â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚ â”‚
â”‚  â”‚                                            â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚ First Name *                               â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚ â”‚ [IMAGE] â”‚ Modern Loft â”‚ â”‚
â”‚  â”‚ â”‚ John                                   â”‚â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚                                            â”‚  â”‚ Berlin, Germany         â”‚ â”‚
â”‚  â”‚ Last Name *                                â”‚  â”‚ â˜… 4.9 (127 reviews)     â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚ â”‚ Doe                                    â”‚â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚                                            â”‚  â”‚ Check-in                â”‚ â”‚
â”‚  â”‚ Email Address *                            â”‚  â”‚ Sat, Feb 1, 2025        â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚ 3:00 PM                  â”‚ â”‚
â”‚  â”‚ â”‚ john.doe@example.com                   â”‚â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚ Check-out               â”‚ â”‚
â”‚  â”‚ Confirmation will be sent here             â”‚  â”‚ Wed, Feb 5, 2025        â”‚ â”‚
â”‚  â”‚                                            â”‚  â”‚ 11:00 AM                â”‚ â”‚
â”‚  â”‚ Phone Number                               â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚ Guests: 2               â”‚ â”‚
â”‚  â”‚ â”‚ +49 â–¼ â”‚ 171 234 5678                   â”‚â”‚  â”‚ Nights: 4               â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚ For urgent booking updates (optional)      â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚ â”‚
â”‚  â”‚                                            â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚ SPECIAL REQUESTS (Optional)               â”‚  â”‚ PRICE DETAILS           â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                 â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚ â‚¬120 x 4 nights   â‚¬480  â”‚ â”‚
â”‚  â”‚ â”‚ We would appreciate an early check-in  â”‚â”‚  â”‚ Cleaning fee      â‚¬50   â”‚ â”‚
â”‚  â”‚ â”‚ if possible (around 2 PM).             â”‚â”‚  â”‚ Service fee       â‚¬25   â”‚ â”‚
â”‚  â”‚ â”‚                                        â”‚â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚ Total (EUR)       â‚¬555  â”‚ â”‚
â”‚  â”‚                                            â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚ ACCOUNT OPTIONS                            â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                           â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚ â–¡ Create an account for future bookings   â”‚  â”‚ [Edit Dates/Guests]     â”‚ â”‚
â”‚  â”‚   â€¢ Manage your bookings easily           â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚   â€¢ Receive personalized recommendations  â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚   â€¢ Faster checkout for future stays      â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚                                            â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚                                            â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚ By continuing, you agree to our           â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚ [Terms of Service] and [Privacy Policy]   â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚                                            â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚        [Continue to Payment â–¶]            â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚                                            â”‚  â”‚                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Form Validation

| Field | Required | Validation |
|-------|----------|------------|
| First Name | Yes | Min 1 char, max 50 chars |
| Last Name | Yes | Min 1 char, max 50 chars |
| Email | Yes | Valid email format |
| Phone | No | Valid phone with country code |
| Special Requests | No | Max 500 chars |
| Create Account | No | Checkbox |

### API Calls (Step 3)

On "Continue to Payment" click:

```typescript
// POST /api/v1/bookings
{
  property_id: "uuid",
  check_in: "2025-02-01",
  check_out: "2025-02-05",
  num_guests: 2,
  guest: {
    first_name: "John",
    last_name: "Doe",
    email: "john.doe@example.com",
    phone: "+491712345678"
  },
  special_requests: "We would appreciate an early check-in if possible.",
  create_account: false
}

// Response
{
  booking_id: "booking-uuid",
  booking_reference: "PMS-2025-000123",
  status: "reserved",
  payment_status: "pending",
  total_price: 555,
  currency: "EUR",
  expires_at: "2025-01-15T10:30:00Z",  // 30 min from now
  stripe_client_secret: "pi_xxx_secret_yyy"
}
```

---

## 5. Step 4: Payment

### Page Route
```
/booking/[booking_id]/payment
```

### User Journey
1. Guest reviews order summary
2. Enters payment information (Stripe Elements)
3. Accepts terms and conditions
4. Clicks "Pay & Confirm"
5. Sees loading state during processing
6. Handles success or error

### UI Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo]                                                          [Step 4/5] â”‚
â”‚                                                                              â”‚
â”‚  [â—€ Back]  Payment                                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ PAYMENT INFORMATION                        â”‚  â”‚ ORDER SUMMARY           â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                        â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚ â”‚
â”‚  â”‚                                            â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚ â±ï¸ Complete payment within 27:45           â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚ â”‚
â”‚  â”‚                                            â”‚  â”‚ â”‚ [IMAGE] â”‚ Modern Loft â”‚ â”‚
â”‚  â”‚ Card Information                           â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚ Feb 1 - Feb 5, 2025     â”‚ â”‚
â”‚  â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚  â”‚ 4 nights Â· 2 guests     â”‚ â”‚
â”‚  â”‚ â”‚ â”‚ 4242 4242 4242 4242             â”‚â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚ â”‚
â”‚  â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚ â”‚ â”‚ MM / YY      â”‚ â”‚ CVC          â”‚    â”‚â”‚  â”‚ Accommodation     â‚¬480  â”‚ â”‚
â”‚  â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚â”‚  â”‚ Cleaning fee      â‚¬50   â”‚ â”‚
â”‚  â”‚ â”‚                                       â”‚â”‚  â”‚ Service fee       â‚¬25   â”‚ â”‚
â”‚  â”‚ â”‚ [VISA] [MC] [AMEX] [+ More]          â”‚â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚ â”‚
â”‚  â”‚                                            â”‚  â”‚ TOTAL             â‚¬555  â”‚ â”‚
â”‚  â”‚ Cardholder Name                            â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚ â”‚
â”‚  â”‚ â”‚ John Doe                               â”‚â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚ CANCELLATION POLICY     â”‚ â”‚
â”‚  â”‚                                            â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚ Billing Address                            â”‚  â”‚ Free cancellation until â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚ Jan 25, 2025            â”‚ â”‚
â”‚  â”‚ â”‚ Country â–¼  Germany                     â”‚â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚ After that, the first   â”‚ â”‚
â”‚  â”‚                                            â”‚  â”‚ night is non-refundable â”‚ â”‚
â”‚  â”‚                                            â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚                                            â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚ â˜‘ I agree to the Terms of Service,        â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚   Privacy Policy, and House Rules         â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚                                            â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚ â˜‘ I understand the cancellation policy    â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚                                            â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚                                            â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚  [ğŸ”’ Pay â‚¬555 & Confirm Booking]          â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚                                            â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚  Your payment is secure and encrypted     â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚  Powered by Stripe                         â”‚  â”‚                         â”‚ â”‚
â”‚  â”‚                                            â”‚  â”‚                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Payment Processing States

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PAYMENT STATES                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  INITIAL STATE                                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                   â”‚
â”‚  [Pay â‚¬555 & Confirm Booking]  â† Button enabled                 â”‚
â”‚                                                                  â”‚
â”‚  PROCESSING STATE                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚              [ğŸ”„ Processing payment...]                      â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚        Please do not close this window                       â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                  â”‚
â”‚  ERROR STATE                                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  âš ï¸ Payment Failed                                          â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚  Your card was declined. Please check your card details     â”‚â”‚
â”‚  â”‚  or try a different payment method.                         â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚  [Try Again] (Attempt 1/3)                                   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                  â”‚
â”‚  3D SECURE STATE                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸ” Additional Authentication Required                       â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚  Your bank requires additional verification.                 â”‚â”‚
â”‚  â”‚  Please complete the authentication in the popup.            â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚  [Authentication Window Opens]                               â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Payment Timer

A countdown timer shows time remaining until booking expires:

```typescript
// Timer component behavior
const BOOKING_TIMEOUT = 30 * 60 * 1000; // 30 minutes

// When timer reaches 5 minutes
"âš ï¸ Your booking will expire in 5 minutes. Please complete payment."

// When timer reaches 1 minute
"âš ï¸ Last minute! Complete payment now to secure your booking."

// When timer expires
"âŒ Your booking has expired. Please start a new booking."
// Redirect to property page with dates preserved
```

### API Calls (Step 4)

```typescript
// Frontend: Stripe.js confirmPayment
const { error, paymentIntent } = await stripe.confirmPayment({
  elements,
  redirect: 'if_required',
  confirmParams: {
    return_url: `${origin}/booking/${bookingId}/confirmation`,
    payment_method_data: {
      billing_details: {
        name: 'John Doe',
        address: { country: 'DE' }
      }
    }
  }
});

// If no redirect required and payment succeeded:
// POST /api/v1/bookings/{booking_id}/confirm
{
  payment_intent_id: "pi_xxx"
}

// Response
{
  booking_id: "uuid",
  booking_reference: "PMS-2025-000123",
  status: "confirmed",
  payment_status: "paid",
  confirmed_at: "2025-01-15T10:05:00Z"
}
```

---

## 6. Step 5: Confirmation

### Page Route
```
/booking/[booking_id]/confirmation
```

### User Journey
1. Guest sees confirmation message
2. Views booking details
3. Receives confirmation email
4. Can add to calendar, print, or view booking

### UI Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo]                                                          [Step 5/5] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚                    âœ“ Booking Confirmed!                                  â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚     Thank you, John! Your booking is complete.                          â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚     Confirmation #PMS-2025-000123                                        â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚     A confirmation email has been sent to john.doe@example.com          â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ BOOKING DETAILS                   â”‚  â”‚ PROPERTY                          â”‚â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€                          â”‚â”‚
â”‚  â”‚                                   â”‚  â”‚                                   â”‚â”‚
â”‚  â”‚ Check-in                          â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚â”‚
â”‚  â”‚ Saturday, February 1, 2025        â”‚  â”‚ â”‚                 â”‚               â”‚â”‚
â”‚  â”‚ 3:00 PM - 10:00 PM                â”‚  â”‚ â”‚    [IMAGE]      â”‚               â”‚â”‚
â”‚  â”‚                                   â”‚  â”‚ â”‚                 â”‚               â”‚â”‚
â”‚  â”‚ Check-out                         â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚â”‚
â”‚  â”‚ Wednesday, February 5, 2025       â”‚  â”‚                                   â”‚â”‚
â”‚  â”‚ Until 11:00 AM                    â”‚  â”‚ Modern Loft in Berlin Mitte       â”‚â”‚
â”‚  â”‚                                   â”‚  â”‚ Berlin, Germany                   â”‚â”‚
â”‚  â”‚ Guests: 2                         â”‚  â”‚                                   â”‚â”‚
â”‚  â”‚ Nights: 4                         â”‚  â”‚ [View Property]                   â”‚â”‚
â”‚  â”‚                                   â”‚  â”‚                                   â”‚â”‚
â”‚  â”‚ Total Paid: â‚¬555                  â”‚  â”‚ HOST                              â”‚â”‚
â”‚  â”‚                                   â”‚  â”‚ â”€â”€â”€â”€                              â”‚â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚ Maria                             â”‚â”‚
â”‚  â”‚                                   â”‚  â”‚ Response time: < 1 hour           â”‚â”‚
â”‚  â”‚ GUEST                             â”‚  â”‚ [Contact Host]                    â”‚â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€                             â”‚  â”‚                                   â”‚â”‚
â”‚  â”‚ John Doe                          â”‚  â”‚                                   â”‚â”‚
â”‚  â”‚ john.doe@example.com              â”‚  â”‚                                   â”‚â”‚
â”‚  â”‚ +49 171 234 5678                  â”‚  â”‚                                   â”‚â”‚
â”‚  â”‚                                   â”‚  â”‚                                   â”‚â”‚
â”‚  â”‚ Special Requests:                 â”‚  â”‚                                   â”‚â”‚
â”‚  â”‚ Early check-in requested          â”‚  â”‚                                   â”‚â”‚
â”‚  â”‚                                   â”‚  â”‚                                   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ NEXT STEPS                                                               â”‚â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                               â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚ 1. Check your email for detailed check-in instructions                  â”‚â”‚
â”‚  â”‚ 2. The host will contact you within 24 hours                            â”‚â”‚
â”‚  â”‚ 3. Check-in instructions will be sent 24 hours before arrival           â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  [ğŸ“… Add to Calendar]   [ğŸ–¨ï¸ Print Confirmation]   [ğŸ“§ Resend Email]    â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                              â”‚
â”‚  Want to manage your booking easily?                                        â”‚
â”‚                                                                              â”‚
â”‚  [Create Account] to view all your bookings in one place                    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Post-Confirmation Actions

| Action | Behavior |
|--------|----------|
| Add to Calendar | Downloads .ics file with booking details |
| Print Confirmation | Opens print dialog with formatted confirmation |
| Resend Email | Resends confirmation email |
| Create Account | Opens account creation flow (magic link) |
| View Property | Links back to property detail page |
| Contact Host | Opens messaging interface |

### API Calls (Step 5)

```typescript
// GET /api/v1/bookings/{booking_id}
// Response
{
  booking_id: "uuid",
  booking_reference: "PMS-2025-000123",
  status: "confirmed",
  payment_status: "paid",
  property: {
    id: "uuid",
    name: "Modern Loft in Berlin Mitte",
    address: {
      full_address: "Rosenthaler Str. 40, 10178 Berlin",  // Now visible
      city: "Berlin",
      country: "Germany"
    },
    thumbnail_url: "...",
    check_in_time: "15:00",
    check_out_time: "11:00",
    host: {
      first_name: "Maria",
      response_time: "within an hour"
    }
  },
  guest: {
    first_name: "John",
    last_name: "Doe",
    email: "john.doe@example.com",
    phone: "+491712345678"
  },
  check_in: "2025-02-01",
  check_out: "2025-02-05",
  num_guests: 2,
  num_nights: 4,
  special_requests: "Early check-in requested",
  pricing: {
    subtotal: 480,
    cleaning_fee: 50,
    service_fee: 25,
    total: 555,
    currency: "EUR"
  },
  confirmed_at: "2025-01-15T10:05:00Z",
  cancellation_policy: {
    type: "moderate",
    free_cancellation_until: "2025-01-25T23:59:59Z",
    description: "Free cancellation until Jan 25"
  }
}

// POST /api/v1/bookings/{booking_id}/calendar-export
// Response: .ics file download

// POST /api/v1/bookings/{booking_id}/resend-confirmation
// Response: { status: "sent" }
```

---

## 7. Mobile-Responsive Design

### Breakpoints

| Breakpoint | Width | Layout |
|------------|-------|--------|
| Mobile | < 640px | Single column, stacked elements |
| Tablet | 640px - 1024px | Two columns, collapsible sections |
| Desktop | > 1024px | Full layout with sidebars |

### Mobile-Specific Adaptations

**Step 1 (Search):**
- Collapsible search bar (tap to expand)
- Full-screen filter modal
- Horizontal scrollable property cards

**Step 2 (Property Detail):**
- Sticky "Book Now" bottom bar
- Full-screen image gallery
- Collapsible sections (Description, Amenities, etc.)
- Modal calendar for date selection

**Step 3-4 (Guest Details & Payment):**
- Single column form layout
- Floating booking summary (expandable)
- Full-width buttons

**Step 5 (Confirmation):**
- Vertically stacked sections
- Easy-tap action buttons

---

## 8. Accessibility (WCAG 2.1 AA)

### Requirements

1. **Keyboard Navigation**: All interactive elements accessible via Tab
2. **Screen Reader**: Proper ARIA labels, landmarks, live regions
3. **Color Contrast**: Minimum 4.5:1 for text
4. **Focus Indicators**: Visible focus states on all inputs
5. **Error Messages**: Associated with form fields, announced to screen readers
6. **Skip Links**: "Skip to main content" link at top of each page

### ARIA Examples

```html
<!-- Calendar date selection -->
<button
  role="gridcell"
  aria-label="February 1, 2025, available, 120 euros per night"
  aria-selected="true"
  tabindex="0"
>
  1
</button>

<!-- Price breakdown -->
<dl aria-label="Price breakdown">
  <dt>Accommodation (4 nights)</dt>
  <dd>480 euros</dd>
  <dt>Cleaning fee</dt>
  <dd>50 euros</dd>
</dl>

<!-- Form validation error -->
<input
  type="email"
  aria-invalid="true"
  aria-describedby="email-error"
/>
<span id="email-error" role="alert">
  Please enter a valid email address
</span>
```

---

## 9. Analytics & Tracking

### Funnel Events

| Event | Step | Data |
|-------|------|------|
| `search.performed` | 1 | location, dates, guests, filters |
| `property.viewed` | 2 | property_id, source (search/direct) |
| `availability.checked` | 2 | property_id, dates, available |
| `booking.started` | 3 | property_id, dates, total_price |
| `payment.initiated` | 4 | booking_id, payment_method |
| `payment.completed` | 4 | booking_id, amount |
| `payment.failed` | 4 | booking_id, error_type |
| `booking.confirmed` | 5 | booking_id, booking_reference |

### Conversion Metrics

- **Search to View Rate**: property.viewed / search.performed
- **View to Book Rate**: booking.started / property.viewed
- **Checkout Completion Rate**: booking.confirmed / booking.started
- **Payment Success Rate**: payment.completed / payment.initiated

---

## 10. Error Handling

### User-Facing Error Messages

| Scenario | Message |
|----------|---------|
| Dates unavailable | "Sorry, these dates are no longer available. Please select different dates." |
| Payment declined | "Your payment was declined. Please check your card details or try a different card." |
| Network error | "Connection lost. Please check your internet and try again." |
| Booking timeout | "Your booking session has expired. Please start again." |
| Rate limit | "Too many attempts. Please wait a moment and try again." |
| Server error | "Something went wrong on our end. Please try again in a few minutes." |

### Error Page (500)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                  â”‚
â”‚                    ğŸ˜” Something went wrong                       â”‚
â”‚                                                                  â”‚
â”‚     We're experiencing technical difficulties.                  â”‚
â”‚     Please try again in a few minutes.                          â”‚
â”‚                                                                  â”‚
â”‚     If the problem persists, contact support@pms-webapp.com    â”‚
â”‚                                                                  â”‚
â”‚              [Return to Home]  [Try Again]                      â”‚
â”‚                                                                  â”‚
â”‚     Error ID: abc123-xyz789                                     â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Appendix A: URL Structure Summary

| Page | URL Pattern | Query Parameters |
|------|-------------|------------------|
| Property Search | `/properties` | `location`, `check_in`, `check_out`, `guests`, `price_min`, `price_max`, `bedrooms`, `amenities`, `page` |
| Property Detail | `/properties/[property_id]` | `check_in`, `check_out`, `guests` |
| Guest Details | `/booking/[property_id]/details` | `check_in`, `check_out`, `guests` |
| Payment | `/booking/[booking_id]/payment` | - |
| Confirmation | `/booking/[booking_id]/confirmation` | - |
| Booking Management | `/my-bookings/[booking_id]` | - |

---

## Appendix B: State Management

### Booking Flow State (Zustand)

```typescript
interface BookingFlowState {
  // Property selection
  propertyId: string | null;
  property: Property | null;

  // Dates
  checkIn: Date | null;
  checkOut: Date | null;

  // Guests
  numGuests: number;

  // Guest details
  guestDetails: {
    firstName: string;
    lastName: string;
    email: string;
    phone: string;
    specialRequests: string;
    createAccount: boolean;
  };

  // Pricing
  priceBreakdown: PriceBreakdown | null;

  // Booking
  bookingId: string | null;
  bookingReference: string | null;
  stripeClientSecret: string | null;
  expiresAt: Date | null;

  // Status
  status: 'idle' | 'loading' | 'reserved' | 'processing' | 'confirmed' | 'failed' | 'expired';
  error: string | null;

  // Actions
  setProperty: (property: Property) => void;
  setDates: (checkIn: Date, checkOut: Date) => void;
  setGuests: (numGuests: number) => void;
  setGuestDetails: (details: Partial<GuestDetails>) => void;
  createBooking: () => Promise<void>;
  confirmPayment: (paymentIntentId: string) => Promise<void>;
  reset: () => void;
}
```

---

## Appendix C: Related Documents

- [Frontend Components](./frontend-components.tsx)
- [Backend API Routes](./backend-api-routes.py)
- [Stripe Integration](./stripe-integration.md)
- [Edge Cases](./edge-cases.md)
- [State Machine](./state-machine.mmd)
- [Email Templates](./email-templates/)
